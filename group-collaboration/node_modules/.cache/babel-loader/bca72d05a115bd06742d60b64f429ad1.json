{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Qing\\\\Desktop\\\\GroupCollaborationTool\\\\group-collaboration\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Qing\\\\Desktop\\\\GroupCollaborationTool\\\\group-collaboration\\\\src\\\\components\\\\SignUp\\\\form.js\";\nimport React, { useState, useContext } from 'react';\nimport { FirebaseContext } from '../Firebase';\nimport { useHistory } from 'react-router-dom';\nimport * as ROUTES from '../../constants/routes';\nexport default function () {\n  const history = useHistory();\n  const firebase = useContext(FirebaseContext);\n\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        email = _useState2[0],\n        setEmail = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        password = _useState4[0],\n        setPassword = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        passwordConfirmation = _useState6[0],\n        setPasswordConfirmation = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        error = _useState8[0],\n        setError = _useState8[1];\n\n  const validate = () => {\n    return email.length > 0 && password.length > 0 && password === passwordConfirmation;\n  };\n\n  const createAdjunctProfile = user => firebase.db.collection(process.env.REACT_APP_PROFILES_COLLECTION).doc(user.uid).set({\n    displayName: user.email.split('@')[0],\n    description: \"\"\n  }).catch(error => setError(error));\n\n  const onSubmit = event => {\n    event.preventDefault();\n    firebase.doCreateUserWithEmailAndPassword(email, password).then(() => createAdjunctProfile(firebase.auth.currentUser)).then(() => history.push(ROUTES.EDIT_PROFILE)).catch(error => setError(error));\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    autoFocus: true,\n    type: \"email\",\n    placeholder: \"email address\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"confirm password\",\n    value: passwordConfirmation,\n    onChange: e => setPasswordConfirmation(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Sign Up!\",\n    disabled: !validate(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), error && React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, error.message)));\n}","map":{"version":3,"sources":["C:/Users/Qing/Desktop/GroupCollaborationTool/group-collaboration/src/components/SignUp/form.js"],"names":["React","useState","useContext","FirebaseContext","useHistory","ROUTES","history","firebase","email","setEmail","password","setPassword","passwordConfirmation","setPasswordConfirmation","error","setError","validate","length","createAdjunctProfile","user","db","collection","process","env","REACT_APP_PROFILES_COLLECTION","doc","uid","set","displayName","split","description","catch","onSubmit","event","preventDefault","doCreateUserWithEmailAndPassword","then","auth","currentUser","push","EDIT_PROFILE","e","target","value","message"],"mappings":"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","sourcesContent":["import React, {useState, useContext} from 'react'\r\nimport {FirebaseContext} from '../Firebase'\r\nimport {useHistory} from 'react-router-dom'\r\nimport * as ROUTES from '../../constants/routes';\r\n\r\nexport default function() {\r\n  const history = useHistory()\r\n  const firebase = useContext(FirebaseContext)\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [passwordConfirmation, setPasswordConfirmation] = useState(\"\")\r\n  const [error, setError] = useState(\"\")\r\n\r\n  const validate = () => {\r\n    return (\r\n      email.length > 0 &&\r\n      password.length > 0 &&\r\n      password === passwordConfirmation\r\n    )\r\n  }\r\n\r\n  const createAdjunctProfile = (user) =>\r\n    firebase.db\r\n      .collection(process.env.REACT_APP_PROFILES_COLLECTION)\r\n      .doc(user.uid)\r\n      .set( {\r\n        displayName: user.email.split('@')[0],\r\n        description: \"\",\r\n      })\r\n      .catch( error => setError(error) )\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    firebase\r\n      .doCreateUserWithEmailAndPassword(email, password)\r\n      .then( () => createAdjunctProfile(firebase.auth.currentUser) )\r\n      .then( () => history.push(ROUTES.EDIT_PROFILE) )\r\n      .catch( error => setError(error) )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          autoFocus\r\n          type=\"email\"\r\n          placeholder=\"email address\"\r\n          value={email}\r\n          onChange={e => setEmail(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"password\"\r\n          value={password}\r\n          onChange={e => setPassword(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"confirm password\"\r\n          value={passwordConfirmation}\r\n          onChange={e => setPasswordConfirmation(e.target.value)}\r\n        />\r\n        <input type=\"submit\" value=\"Sign Up!\" disabled={!validate()} />\r\n\r\n        {error && <p>{error.message}</p>}\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}